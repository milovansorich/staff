extends layout

block content
  header.bg-white.shadow
        .mx-auto.max-w-7xl.px-4.py-6(class='sm:px-6 lg:px-8')
          h1.text-3xl.font-bold.tracking-tight.text-gray-900 Ranking de postulantes
          if role == 'admin'
            .m-6.flex.items-center.justify-end.gap-x-6
              form(action='/jobs/new', method='GET')
                button.rounded-md.bg-indigo-600.px-3.py-2.text-sm.font-semibold.text-white.shadow-sm(type='submit' class='hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600') Crear puesto
          
          ul.divide-y.divide-gray-100(role='list')
            li.flex.justify-between.gap-x-6.py-5
              .flex.min-w-0.gap-x-4
                img.h-12.w-12.flex-none.rounded-full.bg-gray-50(src='https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80' alt='')
                .min-w-0.flex-auto
                  p.text-sm.font-semibold.leading-6.text-gray-900 #{job.title}
                  p.mt-1.truncate.text-xs.leading-5.text-gray-500 #{job.role}
                  - applicants = job.applicants === undefined ? 0 : job.applicants.length
                  p.mt-1.truncate.text-xs.leading-5.text-gray-500 #{applicants} postulaciones
              .hidden.shrink-0(class='sm:flex sm:flex-col sm:items-end')
                p.text-sm.leading-6.text-gray-900 #{job.salary} $CLP 
            
            .px-4.py-6(class='sm:grid sm:grid-cols-2 sm:gap-3 sm:px-0')
              dt.text-sm.font-medium.leading-6.text-gray-900 Postulantes
              dd.mt-2.text-sm.text-gray-900(class='sm:col-span-2 sm:mt-0')
                ul.divide-y.divide-gray-100.rounded-md.border.border-gray-200(role='list')
                  for item in ranking
                    - applicant = item[0]
                    - points = item[1] 
                    li.flex.items-center.justify-between.py-4.pl-4.pr-5.text-sm.leading-6
                      .flex.w-0.flex-1.items-center
                        #{points}
                        .ml-4.flex.min-w-0.flex-1.gap-2
                          span.truncate.font-medium #{applicant}
                      .inline-flex.ml-4.flex-shrink-0.gap-2
                        a.font-medium.text-indigo-600(href="/profile/"+applicant class='hover:text-indigo-500') Ver Perfil
                        a.font-medium.text-indigo-600(href="/ranking/"+job.code+"/assign/"+applicant class='hover:text-indigo-500') Asignar
                  
  